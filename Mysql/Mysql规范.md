# MySQL数据库表字段命名规范

## 一、数据库命名规范 

采用**26个英文字母(区分大小写)**、**0-9的自然数(**通常不需要)、**下划线`_`**组成，不能出现其他字符(注释除外)。  

命名简洁明确，多个单词用下划线`_`分隔，**一个项目一个数据库，多个项目慎用同一个数据库**  
**注意事项：**  
(1) 以上命名都不得超过30个字符的系统限制.变量名的长度限制为29(不包括标识字符@)。  
(2) 数据对象、变量的命名都采用英文字符，禁止使用中文命名，绝对不要在对象名的字符之间留空格。  
(3) 小心保留词，要保证你的字段名没有和保留词、数据 库系统或者常用访问方法冲突。  
(4) 保持字段名和类型的一致性，在命名字段并为其指定数据类型的时候一定要保证一致性。假如数据类型在一个表里是整数，那在另一个表里可就别变成字符型了。  

## 二、数据库表命名规范

### 2.1数据表命名规范
（1）采用26个英文字母(区分大小写)、**0-9的自然数(**经常不需要)、**下划线_**组成，命名简洁明确，多个单词用下划线_分隔  
（2）全部小写命名，禁止出现大写  
（3）禁止使用数据库关键字，如：name，time ，datetime，password等  
（4）表名称不应该取得太长（一般不超过三个英文单词）  
（5）表的名称一般使用名词或者动宾短语  
（6）用单数形式表示名称，例如，使用 employee，而不是 employees  
	    明细表的名称为：主表的名称+字符dtl（detail缩写）  
    	例如：采购定单的名称为：po_order，则采购定单的明细表为：po_orderdtl  
（7）表必须填写描述信息（使用SQL语句建表时）  

### 2.2命名规范  

①模块_+功能点 示例：alllive_log alllive_category  
②功能点 示例：live message  
③通用表 示例：all_user  


### 2.3待优化命名示例

**① 冗余：**

​	错误示例：yy_alllive_video_recomment yy_alllive_open_close_log

​	说明：去除项目名，简化表名长度，去”yy_”

**② 相同类别表命名存在差异，管理性差**

​	错误示例：yy_all_live_category yy_alllive_comment_user

​	说明：去除项目名，统一命名规则，均为”yy_alllive_”开头即可

**③ 命名格式存在差异**

​	错误示例：yy_showfriend yy_user_getpoints yy_live_program_get
​	说明：去除项目名，统一命名规则，**动宾短语分离**且**动宾逻辑顺序统一**



## 三、数据库字段命名规范

### 3.1字段命名规范

（1）采用26个英文字母(区分大小写)、**0-9的自然数(**经常不需要)、**下划线_**组成，命名简洁明确，多个单词用下划线_分隔  
（2）全部小写命名，禁止出现大写  
（3）字段必须填写描述信息  
（4）禁止使用数据库关键字，如：name，time ，datetime password 等  
（5）字段名称一般采用名词或动宾短语  
（6）采用字段的名称必须是易于理解，一般不超过三个英文单词  
（7）在命名表的列时，不要重复表的名称   
	例如，在名employe的表中避免使用名为employee_lastname的字段  
（8）不要在列的名称中包含数据类型   
（9）字段命名使用完整名称，禁止缩写   

### 3.2 命名规范

**① 名词 ** 示例：user_id user_name sex

**② 动宾短语** 示例：is_friend is_good

### 3.3待优化命名示例
**①大小写规则不统一**
错误示例：user_id houseID   
说明：使用统一规则，修改为”user_id”，”house_id”   

**②加下划线规则不统一**
错误示例：username userid isfriend isgood   
说明：使用下划线进行分类，提升可性，方便管理，修改为”user_name”，”user_id”，”is_friend”，”is_good”

**③字段表示不明确**

错误示例：uid pid  
说明：使用完整名称，提高可读性，修改为”user_id”，”person_id”   



### 3.4字段类型规范

（1）所有字段在设计时，除以下数据类型timestamp、image、datetime、smalldatetime、uniqueidentifier、binary、sql_variant、binary 、varbinary外，必须有默认值，字符型的默认值为一个空字符值串’’，数值型的默认值为数值0，逻辑型的默认值为数值0  
（2）系统中所有逻辑型中数值0表示为“假”，数值1表示为“真”，datetime、smalldatetime类型的字段没有默认值，必须为NULL  
（3）用尽量少的存储空间来存储一个字段的数据   
	使用int就不要使用varchar、char，
	用varchar(16)就不要使varchar(256)   
	IP地址使用int类型  
	固定长度的类型最好使用char，例如：邮编(postcode)  
	能使用tinyint就不要使用smallint，int   
	最好给每个字段一个默认值，最好不能为null     

**（4）用合适的字段类型节约空间**
	字符转化为数字(能转化的最好转化，同样节约空间、提高查询性能)   
	避免使用NULL字段(NULL字段很难查询优化、NULL字段的索引需要额外空间、NULL字段的复合索引无效)   
	少用text类型(尽量使用varchar代替text字段)     

> **按《阿里Java开发规范》中的约定：**  
> **表必备三字段：id, gmt_create, gmt_modified。**  
> 说明：其中 id 必为主键，类型为 unsigned bigint、单表时自增、步长为 1；分表时改为从TDDL Sequence 取值，确保分表之间的全局唯一。gmt_create, gmt_modified 的类型均为date_time 类型。  

### 3.5数据库中每个字段的规范描述

（1）尽量遵守第三范式的标准（3NF）   
	+ 表内的每一个值只能被表达一次  
	+ 表内的每一行都应当被唯一的标示  
	+ 表内不应该存储依赖于其他键的非键信息  
	(2)如果字段事实上是与其它表的关键字相关联而未设计为外键引用，需建索引  
	(3)如果字段与其它表的字段相关联，需建索引  
	(4)如果字段需做模糊查询之外的条件查询，需建索引  
	(5)除了主关键字允许建立簇索引外，其它字段所建索引必须为非簇索引   

## 四、SQL语言编码规范   

### 4.1大小写规范  

（1）所有关键字必须大写，如：INSERT、UPDATE、DELETE、SELECT及其子句，IF……ELSE、CASE、DECLARE等    
（2）所有函数及其参数中除用户变量以外的部分必须大写  
（3）在定义变量时用到的数据类型必须小写  

4.2注释  
注释可以包含在批处理中，在触发器、存储过程中包含描述性注释将大大增加文本的可读性和可维护性，本规范建议：  
（1）注释以英文为主，实际应用中，发现以中文注释的SQL语句版本在英文环境中不可用，为避免后续版本执行过程中发生某些异常错误，建议使用英文注释   
（2）注释尽可能详细、全面创建每一数据对象前，应具体描述该对象的功能和用途，传入参数的含义应该有所说明，如果取值范围确定，也应该一并说明，取值有特定含义的变量（如boolean类型变量），应给出每个值的含义  
（3）注释语法：单行注释、多行注释    
    单行注释：对变量、条件子句可以采用该类注释  
    使用--注释符，--注释符后需要加一个空格，注释才能生效  
    使用#注释符，#注释符后直接加注释内容  
    多行注释：对某项完整的操作建议使用该类注释  
    使用/* */注释符。注释内容写在/*和*/之间，可以跨多行   
（4）注释简洁，同时应描述清晰  
（5）函数注释：  
	编写函数文本–如触发器、存储过程以及其他数据对象–时，必须为每个函数增加适当注释，该注释以多行注释为主，主要结构如下：  
```sql
CREATE PROCEDURE sp_xxx  
```



## 7.数据库设计文档规范

所有数据库设计要写成文档,文档以模块化形式表达.大致格式如下：  

'-------------------------------------------
’ 表 名： web_user
’ 作者： Aeolus(傻鱼)
’ 日期： 2007-04-11
’ 版 本： 1.0
’ 描述： 保存用户资料
’ 具体内容：
’ UserID int,自动增量 用户 代码
’ UserName char(12) 用户名字
’ …
'--------------------------------------------



## 8. 索引使用原则

------

(1) 逻辑主键使用唯一的成组索引，对系统键(作为存储过程)采用唯一的非成组索引，对任何[外键](https://so.csdn.net/so/search?q=外键&spm=1001.2101.3001.7020)列采用非成组索引。考虑数据库的空间有多大，表如何进行访问，还有这些访问是否主要用作读写。  
(2) 大多数数据库都索引自动创建的主键字段，但是可别忘了索引外键，它们也是经常使用的键，比如运行查询显示主表和所有关联表的某条记录就用得上。  
(3) 不要索引blob/text等字段，不要索引大型字段(有很多字符)，这样作会让索引占用太多的存储空间。  
(4) 不要索引常用的小型表  
不要为小型数据表设置任何键，假如它们经常有插入和删除操作就更别这样作了。对这些插入和删除操作的索引维护可能比扫描表空间消耗更多的时间。  

## 9. sql语句规范

------

所有sql关键词全部大 写,比如SELECT，UPDATE，FROM，ORDER BY等，所有的表名和库名都要用引号包含 , 如: 

```sql
SELECT COUNT(*) FROM `cdb_members` WHERE `user_name` = 'aeolus';
```

> **《阿里Java开发规范》并未有上述约定，倒是下面的约定更重要，建表时需要注意。** 
> **6. 【强制】不得使用外键与级联，一切外键概念必须在应用层解决。**  
> 说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，则为级联更新。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。  
> **7. 【强制】禁止使用存储过程，存储过程难以调试和扩展，更没有移植性。**   

## 10.其他设计技巧

**(1) 避免使用触发器**
	触发器的功能通常可以用其他方式实现。在调试程序时触发器可能成为干扰。假如你确实需要采用触发器，你最好集中对它文档化。  
**(2) 使用常用英语(或者其他任何语言) 而不要使用编码或者拼音首字母缩写**  
	在创建下拉菜单、列表、报表时最好按照英语名排序。假如需要编码或者拼音首字母缩写，可以在旁边附上用户知道的英语。  
**(3) 保存常用信息**  
	让一个表专门存放一般数据库信息非常有用。在这个表里存放数据库当前版本、最近检查/修复(对Access) 、关联设计文档的名称、客户等信息。这样可以实现一种简单机制跟踪数据库，当客户抱怨他们的数据库没有达到希望的要求而与你联系时，这样做对非客户机/服务器环境特别有用。  
**(4) 包含版本机制**
	在数据库中引入版本控制机制来确定使用中的数据库的版本。时间一长，用户的需求总是会改变的。最终可能会要求修改数据库结构。把版本信息直接存放到数据库中更为方便。  
**(5) 编制文档**
	对所有的快捷方式、命名规范、限制和函数都要编制文档。  
	采用给表、列、触发器等加注释的数据库工具。对开发、支持和跟踪修改非常有用。  
	对数据库文档化，或者在数据库自身的内部或者单独建立文档。这样，当过了一年多时间后再回过头来做第2个版本，犯错的机会将大大减少。  
**(6) 测试、测试、反复测试**
	建立或者修订数据库之后，必须用用户新输入的数据测试数据字段。最重要的是，让用户进行测试并且同用户一道保证选择的数据类型满足商业要求。测试需要在把新数据库投入实际服务之前完成。   
**(7) 检查设计**
	在开发期间检查数据库设计的常用技术是通过其所支持的应用程序原型检查数据库。换句话说，针对每一种最终表达数据的原型应用，保证你检查了数据模型并且查看如何取出数据。  



## MySQL字段个数限制与性能影响

mysql最多可以多少个字段?  
 答:1024个字段（一般可能没这么多）  
 mysql每行的数据长度最大是多少?   
 答:8092字节   
 mysql每个库最多可以有多少个表?  
 答:20亿个表  

mysql的查询速度会被字段数量影响吗?有没有简单点的优化方案呢？  
 答：肯定会影响的的,不然就不会有垂直分表这一说了  
 实际上垂直分表不仅仅是把字段按数量分开,还要按类型分开  

经常被显示的单独一个表.比如cms新闻系统的标题,摘要,所属分类,缩略图   
 这些字段不管是在首页的列表还是分类页的列表。是显示频率很高的。    
 并且这些字段的长度都是有一定的规律的。  
 基本上不会太长，所以单独一个表。    

定长和不定长的字段尽可能的分开。比如文章的正文。   
 一般情况下在列表页是不会显示的。所以就没必要查询。    
 可以放到副表中去。  

新闻系统的主表中，尽可能的只使用定长字段。比如int 或 char   
 如果只使用定长字段 速度会有明显的提升。  

这是为什么呢？  
 因为mysql的数据储存在硬盘中，   
 查询的时候如果你告诉他每个数据的长度，  
 那么系统就会直接按照长度计算出数据的位置。所以快  
 如果其中有一列的数据长度是未知的。  
 系统只能一点点的去找。所以慢。  

